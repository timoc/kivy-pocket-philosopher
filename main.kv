#:kivy 1.8.0
#:import get_random_color kivy.utils.get_random_color

# DEBUG
#                canvas.after:
#                    Color:
#                        rgba: 1, 0, 0, 0.5
#                    Rectangle:
#                        pos: self.pos
#                        size: self.size

<DynButton@Button>:
    markup: True

<MainActionBar@ActionBar>
    pos_hint: {'top':1}
    ActionView:
        use_separator: True
        ActionPrevious:
            with_previous: False
        ActionOverflow:
        ActionButton:
            text: "Help"
            on_press: app.help_popup()
        ActionButton:
            id: btn_settings
            on_press: app.open_settings()
            text: "Settings"
        ActionButton:
            text: "About"
            on_press: app.about_popup()
        ActionButton:
            on_press: app.stop()
            text: "Exit"

<MainScreen>:
    BoxLayout:
        orientation: "vertical"
        MainActionBar:
        RelativeLayout:
            Image:
                id: bg
                width: root.width
                height: root.height
                keep_ratio: True
                allow_stretch: True
                auto_bring_to_front: False
            Scatter:
                size_hint: None, None
                size: aphorism.size
                Label:
                    id: aphorism
                    font_size: root.height / 20
                    markup: True
                    text: 'Shall we?'
                    text_size: root.width, None
                    size_hint_y: None
                    size: self.texture_size
                    canvas.before:
                        Color:
                            #rgba: get_random_color(0.3)
                            rgba: 0, 0, 0, 0.4
                        Rectangle:
                            pos: self.pos
                            size: self.size
        BoxLayout:
            size_hint_y: '0.1sp'
            DynButton:
                id: btn_random
                on_press: root.btn_random()
                text: "Random"
            DynButton:
                id: btn_test
                on_press: app.SwitchScreen(screen = 'Test')
                text: 'Test'

<TestScreen>:
    BoxLayout:
        orientation: "vertical"
        MainActionBar:
        BoxLayout:
            size_hint_y: 0.1
            DynButton:
                id: 'Test'
                text: 'Test'
                on_press: app.SwitchScreen(screen = 'Main')

<AboutPopup>:
    size_hint: .65, .8
    auto_dismiss: False
    title: 'About Aforgizmo'
    BoxLayout:
        orientation: "vertical"
        padding: 2
        spacing: 10
        Label:
            text_size: self.width, None
            markup: True
            text: 'This app was written by [b]Vijay Mahrra[/b].\n\n[i]http://about.me/vijay.mahrra[/i]\n\nComments, issues and feedback to: [b]vijay.mahrra@gmail.com[/b]\n\n'
        Button:

            text: 'OK'
            on_press: root.dismiss()

<HelpPopup>:
    size_hint: .5, .5
    auto_dismiss: False
    title: 'Aforgizmo Help'
    BoxLayout:
        orientation: "vertical"
        padding: 2
        spacing: 10
        Label:
            size_hint_y: None
            text_size: self.width, None
            markup: True
            text: 'No help available yet!'
        Button:
            text: 'OK'
            on_press: root.dismiss()


